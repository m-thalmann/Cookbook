@use 'sass:map';
@use '@angular/material' as mat;
@use 'variables' as *;
@use 'mixins';
@use 'theme';

$add-button-height-mobile: 5em;

.desktop-spacer {
  display: none;
}

.container {
  > div {
    padding-bottom: 0.1px; // needed for chrome to get margin-bottom working
  }

  header {
    display: flex;
    align-items: center;

    padding: $layout-padding;

    img {
      height: 3em;
      margin-right: 0.5em;
    }

    h1 {
      margin: 0;
      font-size: 2rem;

      @include mixins.font-handwriting();
    }

    .spacer {
      flex: 1;
    }

    .header-buttons {
      display: flex;
      gap: 1em;

      .user-account-button {
        font-size: 1.25em;
        font-family: Helvetica, Arial, sans-serif;

        @include theme.apply() using ($variables) {
          background: mat.get-color-from-palette(map.get($variables, 'primary-palette'), 800);
          color: mat.get-color-from-palette(map.get($variables, 'primary-palette'), '800-contrast');
        }

        &:disabled {
          filter: grayscale(100%);
        }
      }
    }
  }

  &.is-overlay main {
    margin-bottom: 0;
  }

  main {
    margin-bottom: calc($navbar-height + $main-space-bottom);
  }
}

app-layout-add-action-fab {
  position: fixed;
  bottom: $add-button-height-mobile;
  right: 2em;
  z-index: 100;
}

app-layout-default-navbar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;

  z-index: 10;
}

@include mixins.mobile() {
  .container main.has-add-button {
    margin-bottom: calc($navbar-height + $main-space-bottom + $add-button-height-mobile);
  }
}

@include mixins.desktop() {
  :host {
    display: flex;
  }

  .desktop-spacer {
    display: block;
    width: $navbar-desktop-width;
  }

  .container {
    flex: 1;
    display: flex;
    justify-content: center;

    > div {
      width: 100%;
      max-width: $desktop-content-width;
    }

    header {
      margin-bottom: 1em;
    }
  }

  app-layout-default-navbar {
    top: 0;
    right: unset;
  }
}

@media screen and (max-width: calc($desktop-content-width + $navbar-desktop-width * 4)) {
  .desktop-spacer.right {
    display: none;
  }
}

[mat-menu-item][disabled] {
  margin-bottom: 1em;
  opacity: 1;
}
